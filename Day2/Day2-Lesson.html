<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ByteBridge Service Management Training</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (to compile JSX in browser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Custom Scrollbar for professional feel */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
        .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS (Inline SVGs to remove external dependencies) ---
        const Icon = ({ name, size = 20, className = "" }) => {
            const icons = {
                book: <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>,
                activity: <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>,
                check: <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>,
                briefcase: <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>,
                layers: <polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/>,
                pie: <path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/>,
                dollar: <line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>,
                settings: <circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>,
                menu: <line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/>,
                x: <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>,
                award: <circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/>
            };
            return (
                <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    width={size} 
                    height={size} 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    strokeWidth="2" 
                    strokeLinecap="round" 
                    strokeLinejoin="round" 
                    className={className}
                >
                    {icons[name] || <circle cx="12" cy="12" r="10"/>}
                </svg>
            );
        };

        // --- DATA ---

        const MODULES = [
            {
                id: 'strategy',
                title: 'Service Strategy',
                icon: 'briefcase',
                content: {
                    intro: "Service Strategy defines how IT services support the organisation's long-term goals. It turns IT from a cost centre into a strategic partner.",
                    sections: [
                        {
                            title: "The 4 Essential Questions",
                            text: "1. What services should we offer and why?\n2. Who are the customers?\n3. How will we create tangible value?\n4. How should resources be allocated?"
                        },
                        {
                            title: "Why it Matters",
                            text: "Without strategy, services become reactive, technology purchases are impulsive, and IT is viewed merely as a cost centre. A good strategy anticipates demand and aligns with business objectives."
                        },
                        {
                            title: "Key Components",
                            text: "• Service Portfolio: The end-to-end set of services.\n• Demand Management: Analysing usage patterns.\n• Financial Management: Budgeting and accounting.\n• Business Outcomes: Measuring success (e.g., reducing downtime)."
                        }
                    ]
                },
                quiz: [
                    {
                        question: "Which of the following is NOT one of the four essential questions a Service Strategy answers?",
                        options: ["What services should we offer?", "How do we code the application?", "Who are the customers?", "How will these services create value?"],
                        correct: 1
                    },
                    {
                        question: "What is a primary risk of lacking a Service Strategy?",
                        options: ["IT becomes too profitable", "Services become reactive and technology purchases impulsive", "Staff become too skilled", "Documentation becomes too detailed"],
                        correct: 1
                    }
                ]
            },
            {
                id: 'design',
                title: 'Service Design',
                icon: 'layers',
                content: {
                    intro: "Service Design transforms strategic intentions into comprehensive, practical service solutions. It aims to prevent problems by embedding quality from the start.",
                    sections: [
                        {
                            title: "The 5 Key Aspects",
                            text: "1. Service Solutions (Functionality)\n2. Management Information Systems (Tools like ServiceNow)\n3. Technology & Architecture (Cloud vs On-prem)\n4. Processes (Workflows)\n5. Measurement Methods (KPIs & SLAs)"
                        },
                        {
                            title: "The 4 Key Principles",
                            text: "1. Holistic Design (Entire ecosystem)\n2. User Experience (Low friction)\n3. Operational Efficiency (Easy to run)\n4. Business Outcomes (Goal oriented)"
                        }
                    ]
                },
                quiz: [
                    {
                        question: "What is the main output of the Service Design phase?",
                        options: ["The Service Charter", "The Service Design Package (SDP)", "The Financial Audit", "The Marketing Plan"],
                        correct: 1
                    },
                    {
                        question: "Which principle ensures services are easy to run and support?",
                        options: ["Design for Aesthetics", "Design for Operational Efficiency", "Design for Complexity", "Design for Speed"],
                        correct: 1
                    }
                ]
            },
            {
                id: 'portfolio',
                title: 'Portfolio Management',
                icon: 'pie',
                content: {
                    intro: "Service Portfolio Management (SPM) oversees the lifecycle of all services to ensure they are financially justified and aligned to business goals.",
                    sections: [
                        {
                            title: "The Three Sections",
                            text: "1. Service Pipeline: Proposed or developing services (Concept -> Design -> Build).\n2. Service Catalogue: Live, customer-facing services.\n3. Retired Services: No longer in operation (kept for compliance/history)."
                        },
                        {
                            title: "SPM Objectives",
                            text: "SPM ensures the right services are delivered. It helps maximise value, control costs, eliminate redundancy, and strengthen governance."
                        }
                    ]
                },
                quiz: [
                    {
                        question: "Where would a service currently being developed sit in the Portfolio?",
                        options: ["Service Catalogue", "Retired Services", "Service Pipeline", "The Backlog"],
                        correct: 2
                    },
                    {
                        question: "What is the 'Service Catalogue'?",
                        options: ["A list of all retired apps", "A list of active, customer-facing services", "A wish-list for future ideas", "A financial report"],
                        correct: 1
                    }
                ]
            },
            {
                id: 'demand',
                title: 'Demand Management',
                icon: 'activity',
                content: {
                    intro: "Demand Management understands, anticipates, and shapes customer demand for services to prevent overprovisioning (waste) or underprovisioning (failure).",
                    sections: [
                        {
                            title: "Key Concepts",
                            text: "• Patterns of Business Activity (PBA): Cycles like payroll or Black Friday.\n• User Profiles: Groups with similar habits (e.g., remote sales staff).\n• Differential Charging: Charging more during peak times to influence behaviour."
                        },
                        {
                            title: "Cloud Considerations",
                            text: "Cloud offers auto-scaling, but without demand management, costs can spiral. It is crucial to monitor consumption even with elastic resources."
                        }
                    ]
                },
                quiz: [
                    {
                        question: "What is the consequence of 'Overprovisioning'?",
                        options: ["Service outages", "Wasted budget and idle resources", "Slow performance", "High customer complaints"],
                        correct: 1
                    },
                    {
                        question: "What technique involves charging higher fees during peak times?",
                        options: ["Differential Charging", "Flat Rate Billing", "Discounting", "Freemium Model"],
                        correct: 0
                    }
                ]
            },
            {
                id: 'financial',
                title: 'Financial Management',
                icon: 'dollar',
                content: {
                    intro: "This ensures IT services are planned and delivered in a cost-effective manner. It answers: How much does it cost? Who pays? Is it worth it?",
                    sections: [
                        {
                            title: "Core Activities",
                            text: "• Budgeting: Predicting future spend.\n• Accounting: Tracking actual spend.\n• Charging: Billing customers (e.g., Chargeback vs Showback)."
                        },
                        {
                            title: "Key Terms",
                            text: "• TCO (Total Cost of Ownership): Full lifecycle cost.\n• CapEx: One-off purchases (Hardware).\n• OpEx: Recurring costs (Cloud subscriptions)."
                        }
                    ]
                },
                quiz: [
                    {
                        question: "Which represents recurring expenses like cloud subscriptions?",
                        options: ["CapEx", "OpEx", "ROI", "TCO"],
                        correct: 1
                    },
                    {
                        question: "What is 'Showback'?",
                        options: ["Billing the department directly", "Reporting usage costs without actually charging", "Hiding the costs", "Showing the back of the hardware"],
                        correct: 1
                    }
                ]
            },
            {
                id: 'solutions',
                title: 'Designing Solutions',
                icon: 'settings',
                content: {
                    intro: "A Service Solution is the end-to-end engineered design. It's the blueprint that includes functional requirements, NFRs, and support models.",
                    sections: [
                        {
                            title: "NFRs (Non-Functional Requirements)",
                            text: "These define quality, not just function. Examples: Security, Scalability, Availability, Compliance, Disaster Recovery."
                        },
                        {
                            title: "The Service Design Package (SDP)",
                            text: "The formal output handed to Service Transition. It contains requirements, architecture, process maps, and test plans."
                        }
                    ]
                },
                quiz: [
                    {
                        question: "Which of the following is a Non-Functional Requirement (NFR)?",
                        options: ["The system must print invoices", "The system must allow login", "The system must have 99.9% availability", "The system must store customer names"],
                        correct: 2
                    },
                    {
                        question: "Who receives the Service Design Package (SDP)?",
                        options: ["Service Strategy", "Service Transition", "HR Department", "External Auditors"],
                        correct: 1
                    }
                ]
            }
        ];

        // --- COMPONENTS ---

        const Navigation = ({ activeModule, setActiveModule, setView, isMobileMenuOpen, setIsMobileMenuOpen }) => (
            <div className={`fixed inset-y-0 left-0 z-50 w-64 bg-slate-900 text-white transform transition-transform duration-300 ease-in-out ${isMobileMenuOpen ? 'translate-x-0' : '-translate-x-full'} md:relative md:translate-x-0`}>
                <div className="p-6 border-b border-slate-800 flex justify-between items-center">
                    <div>
                        <h1 className="text-xl font-bold text-blue-400">ByteBridge</h1>
                        <p className="text-xs text-slate-400">Training Hub</p>
                    </div>
                    <button onClick={() => setIsMobileMenuOpen(false)} className="md:hidden text-slate-400 hover:text-white">
                        <Icon name="x" size={24} />
                    </button>
                </div>
                <nav className="p-4 space-y-2">
                    {MODULES.map((mod) => (
                        <button
                            key={mod.id}
                            onClick={() => {
                                setActiveModule(mod.id);
                                setView('learn');
                                setIsMobileMenuOpen(false);
                            }}
                            className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${
                                activeModule === mod.id 
                                    ? 'bg-blue-600 text-white shadow-lg' 
                                    : 'text-slate-300 hover:bg-slate-800'
                            }`}
                        >
                            <Icon name={mod.icon} size={20} />
                            <span className="font-medium">{mod.title}</span>
                        </button>
                    ))}
                    <div className="pt-8 px-4">
                        <p className="text-xs uppercase tracking-wider text-slate-500 font-semibold mb-2">Simulations</p>
                        <button onClick={() => { setActiveModule('sim_portfolio'); setView('simulation'); setIsMobileMenuOpen(false); }} className={`w-full text-left py-2 text-sm text-slate-300 hover:text-white flex items-center gap-2 ${activeModule === 'sim_portfolio' ? 'text-blue-400 font-bold' : ''}`}>
                           <Icon name="layers" size={16}/> Portfolio Sorter
                        </button>
                        <button onClick={() => { setActiveModule('sim_demand'); setView('simulation'); setIsMobileMenuOpen(false); }} className={`w-full text-left py-2 text-sm text-slate-300 hover:text-white flex items-center gap-2 ${activeModule === 'sim_demand' ? 'text-blue-400 font-bold' : ''}`}>
                           <Icon name="activity" size={16}/> Demand Balancer
                        </button>
                    </div>
                </nav>
            </div>
        );

        const ContentHeader = ({ title, activeView, setView }) => (
            <div className="bg-white border-b border-slate-200 p-6 shadow-sm">
                <div className="max-w-4xl mx-auto">
                    <h2 className="text-2xl font-bold text-slate-800 mb-4">{title}</h2>
                    <div className="flex space-x-4">
                        <button 
                            onClick={() => setView('learn')}
                            className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${activeView === 'learn' ? 'bg-blue-100 text-blue-700 ring-2 ring-blue-500 ring-offset-1' : 'text-slate-600 hover:bg-slate-100'}`}
                        >
                            <span className="flex items-center gap-2"><Icon name="book" size={16} /> Learn</span>
                        </button>
                        <button 
                            onClick={() => setView('quiz')}
                            className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${activeView === 'quiz' ? 'bg-purple-100 text-purple-700 ring-2 ring-purple-500 ring-offset-1' : 'text-slate-600 hover:bg-slate-100'}`}
                        >
                            <span className="flex items-center gap-2"><Icon name="check" size={16} /> Assessment</span>
                        </button>
                    </div>
                </div>
            </div>
        );

        const LearnView = ({ module }) => (
            <div className="max-w-4xl mx-auto p-6 animate-fadeIn">
                <div className="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-r-lg mb-8">
                    <h3 className="text-lg font-semibold text-blue-900 mb-2">Module Overview</h3>
                    <p className="text-blue-800 leading-relaxed">{module.content.intro}</p>
                </div>
                
                <div className="grid gap-6">
                    {module.content.sections.map((section, idx) => (
                        <div key={idx} className="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                            <h3 className="text-lg font-bold text-slate-800 mb-4 flex items-center">
                                <span className="bg-slate-800 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs mr-3">{idx + 1}</span>
                                {section.title}
                            </h3>
                            <p className="text-slate-600 whitespace-pre-line leading-relaxed pl-9">{section.text}</p>
                        </div>
                    ))}
                </div>
            </div>
        );

        const QuizView = ({ module }) => {
            const [answers, setAnswers] = useState({});
            const [showResults, setShowResults] = useState(false);

            const handleSelect = (qIndex, optionIndex) => {
                if (showResults) return;
                setAnswers(prev => ({ ...prev, [qIndex]: optionIndex }));
            };

            const score = Object.keys(answers).reduce((acc, key) => {
                return acc + (answers[key] === module.quiz[key].correct ? 1 : 0);
            }, 0);

            return (
                <div className="max-w-2xl mx-auto p-6 animate-fadeIn">
                    <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div className="p-6 bg-slate-50 border-b border-slate-200">
                            <h3 className="font-bold text-xl text-slate-800">Knowledge Check</h3>
                            <p className="text-slate-500 text-sm mt-1">Test your understanding of {module.title}</p>
                        </div>

                        <div className="p-6 space-y-8">
                            {module.quiz.map((q, qIdx) => (
                                <div key={qIdx} className="space-y-3">
                                    <p className="font-medium text-slate-800">{qIdx + 1}. {q.question}</p>
                                    <div className="space-y-2">
                                        {q.options.map((opt, oIdx) => {
                                            let styles = "border-slate-200 hover:bg-slate-50 hover:border-blue-300";
                                            if (answers[qIdx] === oIdx) styles = "border-blue-500 bg-blue-50 text-blue-700";
                                            if (showResults) {
                                                if (oIdx === q.correct) styles = "border-green-500 bg-green-50 text-green-700 font-medium";
                                                else if (answers[qIdx] === oIdx && oIdx !== q.correct) styles = "border-red-300 bg-red-50 text-red-700";
                                                else styles = "border-slate-100 text-slate-400 opacity-50";
                                            }

                                            return (
                                                <button
                                                    key={oIdx}
                                                    onClick={() => handleSelect(qIdx, oIdx)}
                                                    className={`w-full text-left p-3 rounded-lg border transition-all ${styles}`}
                                                >
                                                    {opt}
                                                </button>
                                            );
                                        })}
                                    </div>
                                </div>
                            ))}
                        </div>

                        <div className="p-6 bg-slate-50 border-t border-slate-200 flex justify-between items-center">
                            {!showResults ? (
                                <button
                                    onClick={() => setShowResults(true)}
                                    disabled={Object.keys(answers).length !== module.quiz.length}
                                    className="bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                                >
                                    Submit Answers
                                </button>
                            ) : (
                                <div className="w-full flex items-center justify-between animate-fadeIn">
                                    <div className="flex items-center space-x-3">
                                        <Icon name="award" className={score === module.quiz.length ? "text-yellow-500" : "text-blue-500"} size={24} />
                                        <div>
                                            <p className="font-bold text-slate-800">You scored {score} / {module.quiz.length}</p>
                                            <p className="text-xs text-slate-500">{score === module.quiz.length ? "Perfect score! Well done." : "Review the material and try again."}</p>
                                        </div>
                                    </div>
                                    <button
                                        onClick={() => { setShowResults(false); setAnswers({}); }}
                                        className="text-blue-600 hover:text-blue-800 font-medium text-sm"
                                    >
                                        Retake Quiz
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const PortfolioSorter = () => {
            const [items, setItems] = useState([
                { id: 1, name: "Cloud Migration Project", status: 'pipeline' },
                { id: 2, name: "Legacy Email Server", status: 'retired' },
                { id: 3, name: "Employee Portal", status: 'catalogue' },
                { id: 4, name: "AI Chatbot Prototype", status: 'pipeline' },
                { id: 5, name: "Payroll System", status: 'catalogue' }
            ]);
            
            const [gameItems, setGameItems] = useState(items.map(i => ({...i, current: null})));
            const [feedback, setFeedback] = useState("");

            const handleAssign = (itemId, bucket) => {
                setGameItems(prev => prev.map(i => i.id === itemId ? { ...i, current: bucket } : i));
                setFeedback("");
            };

            const checkAnswers = () => {
                const correct = gameItems.filter(i => i.current === i.status).length;
                if (correct === items.length) setFeedback("Excellent! All services are correctly categorised.");
                else setFeedback(`You got ${correct} out of ${items.length} correct. Review the definitions.`);
            };

            return (
                <div className="max-w-4xl mx-auto p-6">
                    <div className="mb-6">
                        <h2 className="text-2xl font-bold text-slate-800 flex items-center gap-2">
                            <Icon name="layers" className="text-purple-600" /> Portfolio Categorisation
                        </h2>
                        <p className="text-slate-600 mt-2">Assign each service to the correct lifecycle stage: <strong>Pipeline</strong> (Proposed/Dev), <strong>Catalogue</strong> (Live), or <strong>Retired</strong> (Decommissioned).</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                        {['pipeline', 'catalogue', 'retired'].map(bucket => (
                            <div key={bucket} className="bg-slate-100 p-4 rounded-xl border-2 border-dashed border-slate-300 min-h-[150px]">
                                <h3 className="font-bold text-slate-700 capitalize mb-3 text-center">{bucket}</h3>
                                <div className="space-y-2">
                                    {gameItems.filter(i => i.current === bucket).map(i => (
                                        <div key={i.id} className="bg-white p-2 rounded shadow-sm text-sm border-l-4 border-blue-500 flex justify-between items-center">
                                            {i.name}
                                            <button onClick={() => handleAssign(i.id, null)} className="text-slate-400 hover:text-red-500"><Icon name="x" size={14}/></button>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>

                    <div className="space-y-4">
                        <h3 className="font-semibold text-slate-700">Unassigned Services:</h3>
                        <div className="flex flex-wrap gap-2">
                            {gameItems.filter(i => i.current === null).map(i => (
                                <div key={i.id} className="bg-white border border-slate-200 px-4 py-2 rounded-lg shadow-sm flex items-center gap-2">
                                    <span className="font-medium text-slate-800">{i.name}</span>
                                    <div className="flex gap-1 ml-2 border-l pl-2 border-slate-200">
                                        <button onClick={() => handleAssign(i.id, 'pipeline')} className="text-xs bg-slate-100 hover:bg-blue-100 px-2 py-1 rounded">Pipe</button>
                                        <button onClick={() => handleAssign(i.id, 'catalogue')} className="text-xs bg-slate-100 hover:bg-green-100 px-2 py-1 rounded">Cat</button>
                                        <button onClick={() => handleAssign(i.id, 'retired')} className="text-xs bg-slate-100 hover:bg-red-100 px-2 py-1 rounded">Ret</button>
                                    </div>
                                </div>
                            ))}
                        </div>
                        {gameItems.filter(i => i.current === null).length === 0 && (
                            <div className="mt-6">
                                <button onClick={checkAnswers} className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 font-medium">Check Answers</button>
                                {feedback && <p className={`mt-3 font-medium ${feedback.includes('Excellent') ? 'text-green-600' : 'text-orange-600'}`}>{feedback}</p>}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const DemandBalancer = () => {
            const [capacity, setCapacity] = useState(50);
            const [demand, setDemand] = useState(50);
            const [hour, setHour] = useState(0);
            const [history, setHistory] = useState([]);
            const [money, setMoney] = useState(1000);
            const [strategy, setStrategy] = useState('none'); 
            const [gameState, setGameState] = useState('playing');

            useEffect(() => {
                if (gameState !== 'playing') return;

                const timer = setInterval(() => {
                    setHour(h => {
                        if (h >= 24) {
                            setGameState('won');
                            return h;
                        }
                        return h + 1;
                    });

                    let currentHour = hour % 24;
                    let newDemand = 30 + Math.random() * 20; 
                    if ((currentHour >= 9 && currentHour <= 11) || (currentHour >= 14 && currentHour <= 16)) {
                        newDemand += 50; 
                    }

                    let cost = 10;
                    let revenue = 0;
                    let effectiveDemand = newDemand;

                    if (strategy === 'differential') {
                        effectiveDemand *= 0.7; 
                        revenue += Math.min(effectiveDemand, capacity) * 3; 
                    } else {
                        revenue += Math.min(effectiveDemand, capacity) * 2; 
                    }

                    if (strategy === 'scale') {
                        cost += 50;
                        setCapacity(prev => Math.min(prev + 5, 120)); 
                    } else {
                        if (capacity > 50) setCapacity(prev => Math.max(50, prev - 2)); 
                    }

                    if (effectiveDemand > capacity) {
                        cost += (effectiveDemand - capacity) * 5; 
                    }

                    setDemand(effectiveDemand);
                    setMoney(m => m + revenue - cost);
                    setHistory(prev => [...prev.slice(-20), { h: hour, d: effectiveDemand, c: capacity }]);

                    if (money < 0) setGameState('lost');

                }, 1000);

                return () => clearInterval(timer);
            }, [hour, strategy, capacity, gameState, money]);

            const restart = () => {
                setHour(0);
                setMoney(1000);
                setCapacity(50);
                setHistory([]);
                setGameState('playing');
            };

            return (
                <div className="max-w-4xl mx-auto p-6">
                    <div className="mb-6 flex justify-between items-end">
                        <div>
                            <h2 className="text-2xl font-bold text-slate-800 flex items-center gap-2">
                                <Icon name="activity" className="text-blue-600" /> Demand Balancer
                            </h2>
                            <p className="text-slate-600 mt-2">Survive 24 hours. Keep Revenue positive. Avoid demand exceeding capacity.</p>
                        </div>
                        <div className="text-right">
                            <div className="text-3xl font-mono font-bold text-slate-800">${Math.floor(money)}</div>
                            <div className="text-xs text-slate-500">Available Budget</div>
                        </div>
                    </div>

                    {gameState === 'lost' && (
                        <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
                            <strong>Bankrupt!</strong> You failed to manage costs or service levels. <button onClick={restart} className="underline font-bold ml-2">Try Again</button>
                        </div>
                    )}
                    {gameState === 'won' && (
                        <div className="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
                            <strong>Success!</strong> You managed the service for a full day. Final Balance: ${Math.floor(money)}. <button onClick={restart} className="underline font-bold ml-2">Play Again</button>
                        </div>
                    )}

                    <div className="bg-slate-900 rounded-xl p-4 h-64 flex items-end gap-1 mb-6 relative overflow-hidden">
                        {history.map((point, i) => (
                            <div key={i} className="flex-1 flex flex-col justify-end h-full gap-0.5 relative group">
                                <div 
                                    style={{ height: `${Math.min(100, point.c)}%` }} 
                                    className="w-full bg-blue-500/30 absolute bottom-0 transition-all duration-300"
                                />
                                <div 
                                    style={{ height: `${Math.min(100, point.d)}%` }} 
                                    className={`w-full z-10 relative transition-all duration-300 ${point.d > point.c ? 'bg-red-500' : 'bg-green-400'}`}
                                />
                            </div>
                        ))}
                        <div className="absolute top-2 right-2 text-white text-xs font-mono">Hour: {hour}:00</div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <button 
                            onClick={() => setStrategy('none')}
                            disabled={gameState !== 'playing'}
                            className={`p-4 rounded-xl border-2 text-left transition-all ${strategy === 'none' ? 'border-slate-800 bg-slate-50' : 'border-slate-200 hover:border-blue-300'}`}
                        >
                            <div className="font-bold text-slate-800">Standard Operation</div>
                            <div className="text-xs text-slate-500 mt-1">Regular pricing. Fixed capacity. Risk of overload.</div>
                        </button>

                        <button 
                            onClick={() => setStrategy('differential')}
                            disabled={gameState !== 'playing'}
                            className={`p-4 rounded-xl border-2 text-left transition-all ${strategy === 'differential' ? 'border-purple-600 bg-purple-50' : 'border-slate-200 hover:border-purple-300'}`}
                        >
                            <div className="font-bold text-purple-800">Differential Charging</div>
                            <div className="text-xs text-slate-500 mt-1">Higher prices reduce demand but increase margin per unit.</div>
                        </button>

                        <button 
                            onClick={() => setStrategy('scale')}
                            disabled={gameState !== 'playing'}
                            className={`p-4 rounded-xl border-2 text-left transition-all ${strategy === 'scale' ? 'border-blue-600 bg-blue-50' : 'border-slate-200 hover:border-blue-300'}`}
                        >
                            <div className="font-bold text-blue-800">Auto-Scaling (Cloud)</div>
                            <div className="text-xs text-slate-500 mt-1">Automatically adds capacity. Very expensive operational cost.</div>
                        </button>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeModule, setActiveModule] = useState('strategy');
            const [view, setView] = useState('learn');
            const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);

            const renderContent = () => {
                if (activeModule === 'sim_portfolio') return <PortfolioSorter />;
                if (activeModule === 'sim_demand') return <DemandBalancer />;

                const moduleData = MODULES.find(m => m.id === activeModule);
                if (!moduleData) return <div>Module not found</div>;

                return (
                    <div className="animate-fadeIn">
                        <ContentHeader title={moduleData.title} activeView={view} setView={setView} />
                        {view === 'learn' && <LearnView module={moduleData} />}
                        {view === 'quiz' && <QuizView module={moduleData} />}
                    </div>
                );
            };

            return (
                <div className="flex h-screen bg-slate-50 font-sans text-slate-900 overflow-hidden">
                    <Navigation 
                        activeModule={activeModule} 
                        setActiveModule={setActiveModule} 
                        setView={setView}
                        isMobileMenuOpen={isMobileMenuOpen}
                        setIsMobileMenuOpen={setIsMobileMenuOpen}
                    />
                    
                    <div className="flex-1 flex flex-col h-full overflow-hidden">
                        <div className="md:hidden bg-slate-900 text-white p-4 flex items-center justify-between">
                            <span className="font-bold">ByteBridge Training</span>
                            <button onClick={() => setIsMobileMenuOpen(true)}>
                                <Icon name="menu" size={24} />
                            </button>
                        </div>

                        <div className="flex-1 overflow-y-auto">
                           {renderContent()}
                           
                           <div className="p-6 text-center text-slate-400 text-xs border-t border-slate-200 mt-auto">
                             <p>ByteBridge Consulting Ltd &copy; 2025. Based on IT010 Day 2 Manual.</p>
                           </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>